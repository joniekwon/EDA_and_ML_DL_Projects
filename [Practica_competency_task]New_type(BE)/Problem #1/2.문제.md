# 숙박 예약 상태 조회하기

> 숙박 예약 관리 시스템을 개발 중입니다. 이 시스템은 고객이 예약한 숙박의 상태를 조회할 수 있는 기능을 포함하고 있습니다. 아래 요구 사항에 따라 예약 상태 조회 기능을 개발해 주세요.

## 1. 문제 풀이의 기본 조건
### 1.1. 공통 사항

- 기본으로 설정된 서버의 주소와 포트는 `0.0.0.0:5678`이며 이는 수정하지 않습니다.
- 모든 API 응답은 기본적으로 상태 코드 `200`과 함께 `application/json` 형식으로 반환합니다. 
  - 단, 문제에서 따로 제시한 부분은 그에 맞게 설정합니다.
- 잘못된 URL 또는 HTTP 메서드에 대한 요청을 처리하기 위해 적절한 오류 메시지와 상태 코드를 반환해야 합니다.
- 테스트 환경에서는 실제 데이터베이스나 파일 시스템을 사용하지 않습니다. 모든 데이터는 메모리 내에서 처리됩니다.

### 1.2. 개발 환경 및 데이터
구현해야 하는 서버의 endpoint는 아래와 같습니다.
```
  - 0.0.0.0:5678
    - /api/reservation/search?customerName={고객이름}
```

- 조건에 맞는 요청과 응답 데이터를 처리하기 위해서 프로젝트 환경에 제공된 데이터를 활용해야합니다. 
- 데이터 파일의 위치와 상세 정보는 아래와 같습니다.
  ```
  /project
    /data
      /input
        reservation.json
  ```

- 데이터 구성 요소는 아래와 같습니다.
 
**reservation.json**
| key             | type    | 설명                                 | 비고            |
| --------------- | ------- | ------------------------------------ | --------------- |
| `id`            | integer |                                      | PK              |
| `customer_name` | string  | 고객 이름                            | 중복 없음       |
| `check_in`      | string  | 체크인 날짜                          | YYYY-MM-DD 형식 |
| `check_out`     | string  | 체크아웃 날짜                        | YYYY-MM-DD 형식 |
| `status`        | string  | 예약 상태 (`confirmed`, `cancelled`) |                 |

## 2. API 개요
### 2.1. 공통 사항
별도의 언급이 없는 경우 아래 조건에 맞춰 응답을 처리합니다.
- API 서버의 정상 응답은 상태 코드 `200`을 포함하여 응답합니다.
- Header의 `Content-Type`을 `application/json`으로 설정하고 JSON 형식으로 응답합니다.

### 2.2. 응답 처리

- 본 문제는 실제 데이터베이스를 사용하지 않습니다. 
- 따라서 주어진 JSON 파일을 활용하여 데이터를 구성하고 문항 별로 필요한 응답은 DB 혹은 파일 형태로 저장하지 않고 HTTP Response 형태로 반환해야합니다.

## 3. API 상세

### 3.1. 기본 요구 사항

---

고객 이름으로 예약을 검색할 수 있는 기능을 구현합니다. 아래와 같은 기능이 구현되어야합니다.

- 고객 이름으로 예약 내역을 검색할 수 있습니다. 
  - 검색 키워드가 고객 이름에 포함되어 있으면 해당 예약 정보가 검색 결과에 나타납니다. (검색 시 대소문자를 구분합니다.)
  - 예를 들어, "Walter"로 검색할 경우 "Walter", "Walters", "Walter Kim" 등이 검색 결과에 포함될 수 있습니다. 하지만 "walter"로 검색할 경우 "Walter"가 포함된 이름은 반환되지 않습니다.
- `all`을 검색어로 넣으면 모든 결과를 반환합니다.
  - 이때 `check_in` 속성의 날짜를 기준으로 오름차순으로 정렬됩니다.
- 검색 결과가 없으면 빈 배열을 반환합니다.
- 고객 이름에 대한 매개 변수 없이 `/api/reservation/search`로 요청이 들어온 경우 잘못된 요청으로 간주하고 상태 코드와 함께 오류 메시지를 반환해야 합니다. 

- API 서버로의 요청 형식은 다음과 같습니다.
  - URL: `0.0.0.0:5678/api/reservation/search?customerName={고객이름}`
  - method: `GET`
- 요청은 아래와 같은 형태로 이루어집니다.
  - Path Parameter: 고객 이름
    - 경로 매개 변수를 통해 검색 대상 고객 이름을 전달
- 요청에 따른 응답은 아래와 같이 구성됩니다.
  - 정상적인 경우
    - 검색된 예약 정보를 `check_in` 날짜를 기준으로 오름차순 정렬하여 반환
    - 만약 검색 결과가 없을 경우 빈 배열 반환
    - `all`로 검색한 경우 모든 예약 정보를 반환
  - 문제가 있는 경우
    - 고객 이름에 대한 매개 변수 없이 요청이 들어온 경우
      - 상태 코드: `400`
      - 에러 메시지: `{"error": customerName is required"}`

### 3.2. 요청 과 응답
#### ✅ 요청 예시

```bash
curl -X GET "0.0.0.0:5678/api/reservation/search?customerName=Justin"
```

#### ✅ 응답 예시

**정상적인 응답인 경우 - 검색 결과가 있는 경우**
```json
[
  // Justin으로 시작하는 고객 이름을 가진 예약 정보
  {
    "id": 1,
    "customer_name": "Justin kim",
    "check_in": "2023-08-01",
    "check_out": "2023-08-03",
    "status": "confirmed"
  }
  ,
  {
    "id": 1,
    "customer_name": "Justin lee",
    "check_in": "2023-08-01",
    "check_out": "2023-08-03",
    "status": "confirmed"
  }
  .. 
  // 추가 결과

]
```

**정상적인 응답인 경우 - all 키워드로 검색한 경우**
```json
[
  {
    "id": 1,
    "customer_name": "Justin kim",
    "check_in": "2023-08-01",
    "check_out": "2023-08-03",
    "status": "confirmed"
  }
  ,
  {
    "id": 1,
    "customer_name": "Justin lee",
    "check_in": "2023-08-01",
    "check_out": "2023-08-03",
    "status": "confirmed"
  }
  .. 
  // 모든 검색 결과를 오름차순으로 반환
]
```

**정상적인 응답인 경우 - 검색 결과가 없는 경우**
```json
[] // 빈 배열
```

**문제가 있는 경우 - 고객 이름에 대한 매개 변수 없이 요청이 들어온 경우**
```json
{
  "error": "customerName is required"
}
```